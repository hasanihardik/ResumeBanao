import e from"@babel/runtime/helpers/extends";import*as n from"@react-pdf/primitives";export*from"@react-pdf/primitives";import r from"queue";import t,{useRef as o,useState as i,useEffect as u}from"react";import c from"@babel/runtime/helpers/asyncToGenerator";import a from"@babel/runtime/regenerator";import l from"@react-pdf/font";import f from"@react-pdf/render";import s from"@react-pdf/pdfkit";import d from"@react-pdf/layout";import p from"@babel/runtime/helpers/objectWithoutPropertiesLoose";import m from"react-reconciler";import{unstable_scheduleCallback as v,unstable_cancelCallback as h}from"scheduler";var y,b=function e(n,r){var t=Object.keys(n),o=Object.keys(r);if(t.length!==o.length)return!1;for(var i=0;i<t.length;i+=1){var u=t[i];if("render"===u&&!n[u]!=!r[u])return!1;if("children"!==u&&n[u]!==r[u]){if("object"==typeof n[u]&&"object"==typeof r[u]&&e(n[u],r[u]))continue;return!1}if("children"===u&&("string"==typeof n[u]||"string"==typeof r[u]))return n[u]===r[u]}return!0},g=["style","children"],w=["style"],C={},T=function(e,n){var r="TEXT"===e.type;"TEXT_INSTANCE"!==n.type||r?e.children.push(n):console.warn("Invalid '"+n.value+"' string child outside <Text> component")},x=function(e){var n=e.onChange;return m({schedulePassiveEffects:v,cancelPassiveEffects:h,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:T,createInstance:function(e,n){var r=n.style;return n.children,{type:e,box:{},style:r||{},props:p(n,g)||{},children:[]}},createTextInstance:function(e,n){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,n,r){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},clearContainer:function(){},prepareUpdate:function(e,n,r,t){return!b(r,t)},resetAfterCommit:void 0===n?function(){}:n,resetTextContent:function(e){},getRootHostContext:function(){return C},getChildHostContext:function(){return C},shouldSetTextContent:function(e,n){return!1},now:Date.now,useSyncScheduling:!0,appendChild:T,appendChildToContainer:function(e,n){"ROOT"===e.type?e.document=n:T(e,n)},insertBefore:function(e,n,r){var t,o=null===(t=e.children)||void 0===t?void 0:t.indexOf(r);void 0!==o&&-1!==o&&n&&e.children.splice(o,0,n)},removeChild:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},removeChildFromContainer:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},commitTextUpdate:function(e,n,r){e.value=r},commitUpdate:function(e,n,r,t,o){var i=o.style,u=p(o,w);e.props=u,e.style=i}})},P="3.0.0",S=new l,k={},N=function(e){var n={type:"ROOT",document:null},r=(y=y||x({onChange:function(){for(var e,n=(null===(e=k.change)||void 0===e?void 0:e.slice())||[],r=0;r<n.length;r+=1)n[r]()}})).createContainer(n),t=function(e){y.updateContainer(e,r,null)};e&&t(e);var o=function(){var e=c(a.mark((function e(r){var t,o,i,u,c,l,p;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),t=n.document.props||{},o=t.pdfVersion,i=t.language,u=t.pageLayout,c=t.pageMode,l=new s({compress:r,pdfVersion:o,lang:i,displayTitle:!0,autoFirstPage:!1,pageLayout:u,pageMode:c}),e.next=6,d(n.document,S);case 6:return p=e.sent,e.abrupt("return",f(l,p));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),i=function(e){void 0===e&&(e={}),n.document.props.onRender&&n.document.props.onRender(e)},u=function(){var e=c(a.mark((function e(){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,o();case 3:return r=e.sent,e.abrupt("return",new Promise((function(e,t){r.on("data",(function(e){n.push(e instanceof Uint8Array?e:new Uint8Array(e))})),r.on("end",(function(){try{var r=new Blob(n,{type:"application/pdf"});i({blob:r}),e(r)}catch(e){t(e)}}))})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),l=function(){var e=c(a.mark((function e(){return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i(),e.abrupt("return",o());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),p=function(){var e=c(a.mark((function e(){var n,r;return a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,o(!1);case 3:return r=e.sent,e.abrupt("return",new Promise((function(e,t){try{r.on("data",(function(e){n+=e})),r.on("end",(function(){i(),e(n)}))}catch(e){t(e)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{on:function(e,n){k[e]||(k[e]=[]),k[e].push(n)},container:n,toBlob:u,toBuffer:l,toString:p,removeListener:function(e,n){if(k[e]){var r=k[e].indexOf(n);r>-1&&k[e].splice(r,1)}},updateContainer:t}},O=S,R={create:function(e){return e}},L=function(n){var t=n.document,c=o(null),a=i({url:null,blob:null,error:null,loading:!1}),l=a[0],f=a[1];u((function(){var n=r({autostart:!0,concurrency:1}),o=function(){f((function(n){return e({},n,{loading:!0})})),n.splice(0,n.length,(function(){return l.error?Promise.resolve():c.current.toBlob()}))};return c.current=N(),c.current.on("change",o),c.current.updateContainer(t),n.on("error",(function(n){console.error(n),f((function(r){return e({},r,{error:n})}))})),n.on("success",(function(e){f({blob:e,error:null,loading:!1,url:URL.createObjectURL(e)})})),function(){n.end(),c.current.removeListener("change",o)}}),[]),u((function(){return function(){l.url&&URL.revokeObjectURL(l.url)}}),[l.url]);return[l,function(){c.current.updateContainer(t)}]},E=["title","style","className","children","innerRef","showToolbar"],F=function(n){var r=n.title,o=n.style,i=n.className,c=n.children,a=n.innerRef,l=n.showToolbar,f=void 0===l||l,s=p(n,E),d=L({document:c}),m=d[0],v=d[1];u(v,[c]);var h=m.url?m.url+"#toolbar="+(f?1:0):null;return t.createElement("iframe",e({src:h,title:r,ref:a,style:o,className:i},s))},I=function(e){var n=e.document,r=e.children,t=L({document:n}),o=t[0],i=t[1];return u(i,[n]),n?r(o):(console.warn("You should pass a valid document to BlobProvider"),null)},B=function(e){var n=e.style,r=e.children,o=e.className,i=e.document,c=e.fileName,a=void 0===c?"document.pdf":c,l=e.onClick,f=L({document:i}),s=f[0],d=f[1];if(u(d,[r]),!i)return console.warn("You should pass a valid document to PDFDownloadLink"),null;return t.createElement("a",{style:n,href:s.url,download:a,className:o,onClick:function(e){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(s.blob,a),"function"==typeof l&&l(e,s)}},"function"==typeof r?r(s):r)},U=function(e){throw new Error(e+" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.")},j=function(){U("renderToStream")},A=function(){U("renderToString")},D=function(){U("renderToFile")},M=function(){U("render")},V=e({pdf:N,usePDF:L,Font:O,version:"3.0.0",StyleSheet:R,PDFViewer:F,BlobProvider:I,PDFDownloadLink:B,renderToStream:j,renderToString:A,renderToFile:D,render:M},n);export{I as BlobProvider,O as Font,B as PDFDownloadLink,F as PDFViewer,R as StyleSheet,x as createRenderer,V as default,N as pdf,M as render,D as renderToFile,j as renderToStream,A as renderToString,L as usePDF,P as version};
//# sourceMappingURL=react-pdf.browser.es.min.js.map
