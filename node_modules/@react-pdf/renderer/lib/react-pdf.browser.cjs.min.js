"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var e=require("@babel/runtime/helpers/extends"),n=require("@react-pdf/primitives"),r=require("queue"),t=require("react"),o=require("@babel/runtime/helpers/asyncToGenerator"),u=require("@babel/runtime/regenerator"),i=require("@react-pdf/font"),a=require("@react-pdf/render"),c=require("@react-pdf/pdfkit"),l=require("@react-pdf/layout"),f=require("@babel/runtime/helpers/objectWithoutPropertiesLoose"),d=require("react-reconciler"),s=require("scheduler");function p(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function v(e){if(e&&e.__esModule)return e;var n=Object.create(null);return e&&Object.keys(e).forEach((function(r){if("default"!==r){var t=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,t.get?t:{enumerable:!0,get:function(){return e[r]}})}})),n.default=e,Object.freeze(n)}var h,m=p(e),b=v(n),y=p(r),g=p(t),w=p(o),x=p(u),C=p(i),T=p(a),P=p(c),O=p(l),S=p(f),k=p(d),E=function e(n,r){var t=Object.keys(n),o=Object.keys(r);if(t.length!==o.length)return!1;for(var u=0;u<t.length;u+=1){var i=t[u];if("render"===i&&!n[i]!=!r[i])return!1;if("children"!==i&&n[i]!==r[i]){if("object"==typeof n[i]&&"object"==typeof r[i]&&e(n[i],r[i]))continue;return!1}if("children"===i&&("string"==typeof n[i]||"string"==typeof r[i]))return n[i]===r[i]}return!0},j=["style","children"],F=["style"],q={},R=function(e,n){var r="TEXT"===e.type;"TEXT_INSTANCE"!==n.type||r?e.children.push(n):console.warn("Invalid '"+n.value+"' string child outside <Text> component")},D=function(e){var n=e.onChange,r=void 0===n?function(){}:n;return k.default({schedulePassiveEffects:s.unstable_scheduleCallback,cancelPassiveEffects:s.unstable_cancelCallback,supportsMutation:!0,isPrimaryRenderer:!1,warnsIfNotActing:!1,appendInitialChild:R,createInstance:function(e,n){var r=n.style;return n.children,{type:e,box:{},style:r||{},props:S.default(n,j)||{},children:[]}},createTextInstance:function(e,n){return{type:"TEXT_INSTANCE",value:e}},finalizeInitialChildren:function(e,n,r){return!1},getPublicInstance:function(e){return e},prepareForCommit:function(){},clearContainer:function(){},prepareUpdate:function(e,n,r,t){return!E(r,t)},resetAfterCommit:r,resetTextContent:function(e){},getRootHostContext:function(){return q},getChildHostContext:function(){return q},shouldSetTextContent:function(e,n){return!1},now:Date.now,useSyncScheduling:!0,appendChild:R,appendChildToContainer:function(e,n){"ROOT"===e.type?e.document=n:R(e,n)},insertBefore:function(e,n,r){var t,o=null===(t=e.children)||void 0===t?void 0:t.indexOf(r);void 0!==o&&-1!==o&&n&&e.children.splice(o,0,n)},removeChild:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},removeChildFromContainer:function(e,n){var r,t=null===(r=e.children)||void 0===r?void 0:r.indexOf(n);void 0!==t&&-1!==t&&e.children.splice(t,1)},commitTextUpdate:function(e,n,r){e.value=r},commitUpdate:function(e,n,r,t,o){var u=o.style,i=S.default(o,F);e.props=i,e.style=u}})},L=new C.default,N={},B=function(e){var n={type:"ROOT",document:null},r=(h=h||D({onChange:function(){for(var e,n=(null===(e=N.change)||void 0===e?void 0:e.slice())||[],r=0;r<n.length;r+=1)n[r]()}})).createContainer(n),t=function(e){h.updateContainer(e,r,null)};e&&t(e);var o=function(){var e=w.default(x.default.mark((function e(r){var t,o,u,i,a,c,l;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return void 0===r&&(r=!0),t=n.document.props||{},o=t.pdfVersion,u=t.language,i=t.pageLayout,a=t.pageMode,c=new P.default({compress:r,pdfVersion:o,lang:u,displayTitle:!0,autoFirstPage:!1,pageLayout:i,pageMode:a}),e.next=6,O.default(n.document,L);case 6:return l=e.sent,e.abrupt("return",T.default(c,l));case 8:case"end":return e.stop()}}),e)})));return function(n){return e.apply(this,arguments)}}(),u=function(e){void 0===e&&(e={}),n.document.props.onRender&&n.document.props.onRender(e)},i=function(){var e=w.default(x.default.mark((function e(){var n,r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[],e.next=3,o();case 3:return r=e.sent,e.abrupt("return",new Promise((function(e,t){r.on("data",(function(e){n.push(e instanceof Uint8Array?e:new Uint8Array(e))})),r.on("end",(function(){try{var r=new Blob(n,{type:"application/pdf"});u({blob:r}),e(r)}catch(e){t(e)}}))})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),a=function(){var e=w.default(x.default.mark((function e(){return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return u(),e.abrupt("return",o());case 2:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c=function(){var e=w.default(x.default.mark((function e(){var n,r;return x.default.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n="",e.next=3,o(!1);case 3:return r=e.sent,e.abrupt("return",new Promise((function(e,t){try{r.on("data",(function(e){n+=e})),r.on("end",(function(){u(),e(n)}))}catch(e){t(e)}})));case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return{on:function(e,n){N[e]||(N[e]=[]),N[e].push(n)},container:n,toBlob:i,toBuffer:a,toString:c,removeListener:function(e,n){if(N[e]){var r=N[e].indexOf(n);r>-1&&N[e].splice(r,1)}},updateContainer:t}},I=L,U={create:function(e){return e}},_=function(e){var n=e.document,r=t.useRef(null),o=t.useState({url:null,blob:null,error:null,loading:!1}),u=o[0],i=o[1];t.useEffect((function(){var e=y.default({autostart:!0,concurrency:1}),t=function(){i((function(e){return m.default({},e,{loading:!0})})),e.splice(0,e.length,(function(){return u.error?Promise.resolve():r.current.toBlob()}))};return r.current=B(),r.current.on("change",t),r.current.updateContainer(n),e.on("error",(function(e){console.error(e),i((function(n){return m.default({},n,{error:e})}))})),e.on("success",(function(e){i({blob:e,error:null,loading:!1,url:URL.createObjectURL(e)})})),function(){e.end(),r.current.removeListener("change",t)}}),[]),t.useEffect((function(){return function(){u.url&&URL.revokeObjectURL(u.url)}}),[u.url]);return[u,function(){r.current.updateContainer(n)}]},A=["title","style","className","children","innerRef","showToolbar"],M=function(e){var n=e.title,r=e.style,o=e.className,u=e.children,i=e.innerRef,a=e.showToolbar,c=void 0===a||a,l=S.default(e,A),f=_({document:u}),d=f[0],s=f[1];t.useEffect(s,[u]);var p=d.url?d.url+"#toolbar="+(c?1:0):null;return g.default.createElement("iframe",m.default({src:p,title:n,ref:i,style:r,className:o},l))},V=function(e){var n=e.document,r=e.children,o=_({document:n}),u=o[0],i=o[1];return t.useEffect(i,[n]),n?r(u):(console.warn("You should pass a valid document to BlobProvider"),null)},X=function(e){var n=e.style,r=e.children,o=e.className,u=e.document,i=e.fileName,a=void 0===i?"document.pdf":i,c=e.onClick,l=_({document:u}),f=l[0],d=l[1];if(t.useEffect(d,[r]),!u)return console.warn("You should pass a valid document to PDFDownloadLink"),null;return g.default.createElement("a",{style:n,href:f.url,download:a,className:o,onClick:function(e){window.navigator.msSaveBlob&&window.navigator.msSaveBlob(f.blob,a),"function"==typeof c&&c(e,f)}},"function"==typeof r?r(f):r)},Y=function(e){throw new Error(e+" is a Node specific API. You're either using this method in a browser, or your bundler is not loading react-pdf from the appropriate web build.")},z=function(){Y("renderToStream")},H=function(){Y("renderToString")},G=function(){Y("renderToFile")},W=function(){Y("render")},J=m.default({pdf:B,usePDF:_,Font:I,version:"3.0.0",StyleSheet:U,PDFViewer:M,BlobProvider:V,PDFDownloadLink:X,renderToStream:z,renderToString:H,renderToFile:G,render:W},b);exports.BlobProvider=V,exports.Font=I,exports.PDFDownloadLink=X,exports.PDFViewer=M,exports.StyleSheet=U,exports.createRenderer=D,exports.default=J,exports.pdf=B,exports.render=W,exports.renderToFile=G,exports.renderToStream=z,exports.renderToString=H,exports.usePDF=_,exports.version="3.0.0",Object.keys(n).forEach((function(e){"default"===e||exports.hasOwnProperty(e)||Object.defineProperty(exports,e,{enumerable:!0,get:function(){return n[e]}})}));
//# sourceMappingURL=react-pdf.browser.cjs.min.js.map
